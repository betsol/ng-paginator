/**
 * betsol-ng-paginator - Paginator for Angular.js
 * @version v0.0.0
 * @link https://github.com/betsol/ng-paginator
 * @license MIT
 *
 * @author Slava Fomin II <s.fomin@betsol.ru>
 */
!function(n,t){"use strict";function e(n){for(;n.length>0;)n.pop()}t.module("betsol.paginator",[]).factory("Paginator",function(){return function(n){function o(){e(l),m=!1,s("List is cleared")}function i(){f=0,g=null,m=!0}function r(){return h=!0,s("Loading batch of items",{criteria:d,itemsPerPage:c,offset:f}),n(d,c,f).then(function(n){if("undefined"==typeof n.data)return console.log("Missing data from loader's response."),void 0;if(null===g){if("undefined"==typeof n.meta)return console.log("Missing meta from loader's response."),void 0;if("undefined"==typeof n.meta.pagination)return console.log("Missing pagination from loader's response."),void 0;if("undefined"==typeof n.meta.pagination.totalCount)return console.log("Missing total from loader's response."),void 0;g=parseInt(n.meta.pagination.totalCount),s("Total is set",g)}m&&o(),t.forEach(n.data,function(n){l.push(n)}),h=!1,a||(a=!0,s("Storage is now initialized")),v&&v(n);var e=n.data.length;return s("Items loaded (count)",e),e})}function u(){return!1!==p?r().then(function(n){f+=n,p=g-(f+1)>=0,s("New offset calculated",f)}):void 0}function s(){y&&console.log.apply(console,arguments)}var a=!1,l=[],f=0,c=null,d={},g=null,p=null,m=!1,h=!1,v=null,y=!1;return{list:l,hasMoreItems:function(){return p},isLoading:function(){return h},setItemsPerPage:function(n){return c=n,this},setCriteria:function(n){return t.equals(d,n)||i(),d=n,this},first:function(){return h?null:(i(),u())},next:function(){return h?null:u()},addLoadEventListener:function(n){return"function"!=typeof n?(console.log("Specified event listener must be a function."),void 0):(v=n,void 0)},getItemsCount:function(){return this.list.length},isEmptyResult:function(){return a&&!h&&0==this.list.length}}}})}(window,angular);